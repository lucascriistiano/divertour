<ui:composition template="/pages/include/template.xhtml"
	xmlns="http://www.w3.org/1999/xhtml" xmlns:b="http://bootsfaces.net/ui"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui">

	<ui:define name="title">Novo Roteiro</ui:define>

	<ui:define name="extra_script">
		<script
			src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDgeHiIZP3daD3XwqOFpjaFPTkU1cAWask&amp;signed_in=true&amp;libraries=places&amp;callback=initAutocomplete"
			async="async" defer="defer"></script>
		<h:outputScript library="common" name="js/mapscript.js" />
	</ui:define>

	<ui:define name="content-area">
		<h:panelGroup id="wrapper" layout="block">
			<!-- <b:inputText id="pac-input" styleClass="controls" type="text" placeholder="Endereço ou nome do local" style="display:none;" rendered="false" /> -->
			<h:panelGroup id="map-canvas" layout="block"></h:panelGroup>
			<h:panelGroup id="push" layout="block"></h:panelGroup>

			<h:panelGroup id="left-map-menu" layout="block">
				<h2>Novo Roteiro</h2>
				
				<h:form prependId="false">
					<h3>Informações</h3>
					<b:inputText id="name" value="#{guideMBean.guide.name}" placeholder="Nome do roteiro" />
        			
        			<br/>
					<b:selectOneMenu value="#{guideMBean.guide.category}">
						<f:selectItems value="#{guideMBean.categoriesOfGuide}" var="category" itemValue="#{category}" itemLabel="#{category}" />
					</b:selectOneMenu>
        			
        			<br/>
					<b:inputText id="period" value="#{guideMBean.guide.period}" placeholder="Dias sugeridos" />
					
					<h3>Lugares</h3>
					
					<p:autoComplete id="place-search" value="#{guideMBean.selectedItem}" completeMethod="#{guideMBean.findResults}" var="foundItem" itemLabel="#{foundItem.exhibitionName}" itemValue="#{foundItem}" converter="searchableConverter" forceSelection="true" maxResults="5" minQueryLength="3">
						<p:ajax event="itemSelect" listener="#{guideMBean.addPlace}" update="selected-place-json" oncomplete="addMarker()"/>
					</p:autoComplete>
       				
       				<h:inputHidden id="selected-place-json" value="#{guideMBean.selectedPlaceJSON}" />
       				
       				<p:commandButton value="Registrar" action="#{guideMBean.register}" />
				</h:form>
			</h:panelGroup>
		</h:panelGroup>
	</ui:define>
	
</ui:composition>