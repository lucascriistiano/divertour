
<ui:composition template="/pages/include/template.xhtml"
	xmlns="http://www.w3.org/1999/xhtml"
	xmlns:b="http://bootsfaces.net/ui"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui">
	
	<ui:define name="title">Novo Lugar</ui:define>
	
	<ui:define name="extra_script">
		<script
			src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDgeHiIZP3daD3XwqOFpjaFPTkU1cAWask&amp;signed_in=true&amp;libraries=places&amp;callback=initAutocomplete"
			async="async" defer="defer"></script>
		<h:outputScript library="common" name="js/script-map-create-place.js" />
	</ui:define>
	
	<ui:define name="content">
			<h:panelGroup layout="block" styleClass="section active" style="margin-top:80px;">
				
				<h:panelGroup layout="block" style="display:block; position:relative;height:20%;background:#B23939;padding:30px; text-align:center;color:#FFF;font-size:2em;font-family:roboto-thin; overflow-y:hidden;">
					<h1 style="color:white;">Novo Lugar <b:iconAwesome name="map-marker"></b:iconAwesome> </h1><br />
				</h:panelGroup>

				<h:panelGroup layout="block" style="height:50%;text-align:center;" styleClass="primary-color">
					<b:iconAwesome name="angle-down" size="3x" />
				</h:panelGroup> 
			</h:panelGroup>
	
			<h:panelGroup layout="block" styleClass="section paper" >
				<b:container styleClass="divsRow">
					<b:row id="firstRow">
						<b:column col-md="12" styleClass="title">
							<hr />	Informações  <hr />
						</b:column>
					</b:row>
					
					<h:form prependId="false">	
						
						<b:row styleClass="equalizer">
							<b:column col-md="6" styleClass="watch">
								<h:outputLabel for="name" value="Nome" />
								<b:inputText id="name" value="#{placeMBean.place.name}" placeholder="Nome do lugar" />
								
								<h:outputLabel for="type" value="Tipo "/>
								<b:selectOneMenu id="type" value="#{placeMBean.place.type}">
									<f:selectItems value="#{placeMBean.typesOfPlace}" var="type" itemValue="#{type}" itemLabel="#{type}" />
								</b:selectOneMenu>
								
								<h:outputLabel for="website" value="Website " />
			       				<b:inputText id="website" value="#{placeMBean.place.website}" placeholder="Website do local" />	
			       				
								<h:outputLabel for="contacts" value="Contato(s): " />
			       				<b:inputText id="contacts" value="#{placeMBean.insertedContact}" placeholder="Contatos do local" />
			       				<p:commandButton value="Adicionar" action="#{placeMBean.addContact}" rendered="false" />		   		       				
			       																			
			       				<h:inputHidden id="currentLat" value="#{placeMBean.currentLat}" />
			       				<h:inputHidden id="currentLng" value="#{placeMBean.currentLng}" />						
							</b:column>
							<b:column col-md="6" styleClass="watch">	
							    <h:outputLabel for="description" value="Descrição" />     
							    <p:editor id="description"  widgetVar="editorWidget" value="#{placeMBean.place.description}" required="tue"
							    	requiredMessage="Descrição Obrigatória" style="width:100%;height:100%;"/>	
							</b:column>
						</b:row>
						
						<b:row>
							<b:column col-md="6">
								<h:outputLabel value="Cidade: "/>
								<b:selectOneMenu id="city" value="#{placeMBean.place.city}">
									<f:selectItems value="#{placeMBean.cities}" var="city" itemValue="#{city}" itemLabel="#{city.name}/#{city.state}" />
								</b:selectOneMenu>								
							</b:column>
							
							<b:column col-md="6">
								<h:outputLabel for="address" value="Endereço: "/>
								<b:inputText id="address" value="#{placeMBean.place.address}" placeholder="Endereço do local" >
									<f:facet name="append">
										<b:commandButton value="Buscar" iconAwesome="search" onclick="geocode()"/>
									</f:facet>
								</b:inputText>						
							</b:column>
						</b:row>
						
						<b:row>
							<b:column col-md="12">
								<h:panelGroup id="map-canvas" layout="block" style="height:300px" />
								<h:panelGroup id="push" layout="block" />
							</b:column>					
						</b:row>
						
						<b:row>
							<b:column col-md="12" style="height:500px;">
								<p:commandButton value="Registrar" action="#{placeMBean.register}" />		
							</b:column>	
						</b:row>
						
						<b:row>
							<b:column col-md="12">
								<ui:remove>
										<h:outputText for="images" value="Imagens: " />
						       				<p:fileUpload value="#{placeMBean.selectedFile}" mode="simple" skinSimple="true"/>
											<p:commandButton value="Submit" ajax="false" actionListener="#{placeMBean.addImage}" disabled="true" />
	
						       			<p:galleria value="#{placeMBean.uploadedFiles}" var="image" panelHeight="300" showCaption="true" >
											<p:graphicImage name="demo/images/nature/#{image}" alt="Image Description for #{image}" title="#{image}"/>
										</p:galleria>
								</ui:remove>
							</b:column>					
						</b:row>
					</h:form>
				</b:container>
			</h:panelGroup>	
	
  
        <script>
   	$( document ).ready(function() {
		$(".divsRow > .equalizer").each(function() { 
		    var height = 0;
		    $(this).find(".watch").each(function() {
		      if($(this).height() > height){
		    	height = $(this).height();
		      }
		    });
		    $(this).find(".watch").height(height);
	  	});
	});       
   	
   	$(function(){
   		$('#description').css('height', '100%').css('height', '-=35px');   		
   	});
   	
        </script>
        
        
	</ui:define>

</ui:composition>