<ui:composition template="/pages/include/template.xhtml"
	xmlns="http://www.w3.org/1999/xhtml"
	xmlns:b="http://bootsfaces.net/ui"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui">
	
	<ui:define name="title">Novo Lugar</ui:define>
	
	<ui:define name="extra_script">
		<script type="text/javascript" src="http://maps.google.com/maps/api/js"></script>
		<h:outputScript library="common" name="js/place_register_script.js" />
	</ui:define>
	
	<ui:define name="content">
		<b:container styleClass="background">
			<h1>Novo Lugar</h1>
			
        	<h:form prependId="false">
				<b:row>
					<b:column col-md="5">
						<h:panelGrid columns="2" cellpadding="10">
							<h:outputText for="name" value="Nome:" />
							<b:inputText id="name" value="#{placeMBean.place.name}" placeholder="Nome do lugar" />
		        			
		        			<h:outputText for="description" value="Descrição: " />
		       				<p:inputTextarea id="description" rows="7" value="#{placeMBean.place.description}" placeholder="Descrição do local" style="width:100%;" />
		       				
		       				<h:outputText for="type" value="Tipo: "/>
							<b:selectOneMenu id="type" value="#{placeMBean.place.type}">
								<f:selectItems value="#{placeMBean.typesOfPlace}" var="type" itemValue="#{type}" itemLabel="#{type}" />
							</b:selectOneMenu>
		       				
		       				<h:outputText for="website" value="Website: " />
		       				<b:inputText id="website" value="#{placeMBean.place.website}" placeholder="Website do local" />
		       				
		       				<h:outputText for="contacts" value="Contato(s): " />
		       				<b:inputText id="contacts" value="#{placeMBean.insertedContact}" placeholder="Contatos do local" />
		       				<p:commandButton value="Adicionar" action="#{placeMBean.addContact}" />
		       				
		       				
		       				<h:outputText for="images" value="Imagens: " />
		       				<p:fileUpload value="#{placeMBean.selectedFile}" mode="simple" skinSimple="true"/>
							<p:commandButton value="Submit" ajax="false" actionListener="#{placeMBean.addImage}" disabled="true" />
		       			</h:panelGrid>
		       			
		       			<p:galleria value="#{placeMBean.uploadedFiles}" var="image" panelHeight="200" showCaption="true" >
							<p:graphicImage name="demo/images/nature/#{image}" alt="Image Description for #{image}" title="#{image}"/>
						</p:galleria>
		       			
	       			</b:column>
	       			
	       			<b:column col-md="7">
	       				<h:outputText value="Cidade: "/>
						<b:selectOneMenu value="#{placeMBean.place.city}">
							<f:selectItems value="#{placeMBean.cities}" var="city" itemValue="#{city}" itemLabel="#{city.name}/#{city.state}" />
						</b:selectOneMenu>
	       				       				
	       				<h:panelGrid columns="3" cellpadding="5">		       				
		       				<h:outputText for="address" value="Endereço: "/>
		       				<b:inputText id="address" value="#{placeMBean.place.address}" placeholder="Endereço do local" />
		       				
		       				<p:commandButton value="Buscar" icon="ui-icon-search" onclick="geocode()" />
		       			</h:panelGrid>
		       			
		       			<h:inputHidden id="currentLat" value="#{placeMBean.currentLat}" />
		       			<h:inputHidden id="currentLng" value="#{placeMBean.currentLng}" />
						
						<p:gmap id="geoGmap" widgetVar="geoMap" center="#{placeMBean.centerGeoMap}" type="ROADMAP" model="#{placeMBean.geoModel}" style="width:100%; height:400px">
							<p:ajax event="geocode" listener="#{placeMBean.onGeocode}" update="@this" />
							<p:ajax event="pointSelect" listener="#{placeMBean.onPointSelect}" update="@this" />
						</p:gmap>
	       			</b:column>
       			</b:row>
       			
       			<p:commandButton value="Registrar" action="#{placeMBean.register}" />
			</h:form>
        </b:container>
	</ui:define>

</ui:composition>